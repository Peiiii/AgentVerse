---
description: 代码库治理的指导思想与战略（五步法）
---

# 指导思想与战略（五步法治理）

## 目标

- 提升可维护性与可扩展性
- 为接入真实后端保留清晰边界
- 保障交付速度与稳定性

## 指导思想

1. **先保留核心价值链**：以真实用户路径和关键业务目标为优先保留对象。
2. **边界优于实现**：接口与模块边界清晰，内部实现可被替换。
3. **先减法后加法**：删除与收口先于优化，避免在噪音上雕花。
4. **先收口再优化**：统一出口、统一入口后再优化性能与体验。
5. **可验证与可回滚**：每一步都有可验证指标与回滚路径。

## 五步法治理规划

### 1) 删除（减法优先）

- **清单化**：功能、脚本、依赖、页面、实验性模块全量盘点。
- **判定标准**：无人使用 / 无负责人 / 无测试 / 无价值 / 与现目标不一致。
- **执行方式**：先停用与标记，再物理删除；保留变更记录。

### 2) 简化（收口通道）

- **API 出口收口**：所有网络与模型调用统一到单一适配层。
- **状态与消息流收口**：避免多套状态管理与事件通道并行。
- **最少抽象**：避免过早设计，优先用清晰可读的结构替代复杂层级。

### 3) 优化/标准化（建立约束）

- **Feature 边界**：跨功能只通过 `index.ts` 暴露公共 API。
- **DTO 映射层**：后端数据与前端 UI/状态解耦。
- **目录规范**：持续执行 Feature-Based 结构，避免漂移。

### 4) 加速（缩短反馈）

- **反馈时间**：核心变更 30-60 分钟内可验证。
- **最小验证集**：lint/typecheck/关键测试/预览脚本可一键运行。

### 5) 自动化（防回退）

- **脚手架**：自动生成 feature 结构与基础文件。
- **约束工具**：eslint 规则与 CI 检查防止跨边界依赖。
- **监控机制**：持续检查无主模块与闲置依赖。

## 交付节奏（建议）

- 每个阶段以 1-2 周为一个小循环，形成可衡量的里程碑。
- 删除与简化优先级高于优化与自动化。
